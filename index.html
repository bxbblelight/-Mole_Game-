<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Kawaii Whack-a-Mole Pop-up From Hole</title>
<style>
  body {
    background: #ffe6cc;
    font-family: 'Comic Sans MS', cursive, sans-serif;
    color: #5a4632;
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .container {
    display: flex;
    gap: 40px;
    align-items: flex-start;
  }
  .game-area {
    text-align: center;
  }
  h1 {
    margin-bottom: 20px;
    font-weight: 700;
    font-family: 'Baloo 2', cursive;
    color: #7b5e3c;
  }
  .scoreboard {
    font-size: 1.8em;
    margin-bottom: 30px;
    font-weight: 700;
    color: #7b5e3c;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    gap: 18px;
    justify-content: center;
  }
  .hole {
    width: 100px;
    height: 100px;
    background: #cbb394;
    border-radius: 50%;
    position: relative;
    overflow: hidden;  /* IMPORTANT: hide mole outside hole */
    box-shadow: inset 0 0 15px #a9936f;
  }
  .mole {
    position: absolute;
    width: 80px;
    height: 70px;
    bottom: -70px; /* start fully hidden below hole */
    left: 50%;
    transform: translateX(-50%);
    cursor: pointer;
    transition: bottom 0.35s cubic-bezier(0.22, 1, 0.36, 1);
    user-select: none;
    z-index: 10;
  }
  .mole.up {
    bottom: 12px; /* visible position inside hole */
  }
  .mole svg {
    width: 100%;
    height: 100%;
    display: block;
  }
  /* Colors for mole types */
  .mole.brown svg .moleBody {
    fill: #6b4f3b;
  }
  .mole.brown svg .eye {
    fill: #3d2a1a;
  }
  .mole.brown svg .cheek {
    fill: #f7c6a3;
    opacity: 0.5;
  }
  .mole.brown svg .nose {
    fill: #5d4429;
  }


  .mole.red svg .moleBody {
    fill: #c94c4c;
  }
  .mole.red svg .eye {
    fill: #5a2b2b;
  }
  .mole.red svg .cheek {
    fill: #f9a6a6;
    opacity: 0.5;
  }
  .mole.red svg .nose {
    fill: #803838;
  }


  .mole.gold svg .moleBody {
    fill: #d4af37;
  }
  .mole.gold svg .eye {
    fill: #5b4d1a;
  }
  .mole.gold svg .cheek {
    fill: #f8e79e;
    opacity: 0.5;
  }
  .mole.gold svg .nose {
    fill: #7e6f1a;
  }


  /* Sidebar */
  .description {
    max-width: 300px;
    background: #fff8f0;
    padding: 20px;
    border-radius: 14px;
    box-shadow: 3px 3px 15px rgba(0,0,0,0.1);
    font-size: 1rem;
    color: #7b5e3c;
    line-height: 1.5;
  }
  .description h3 {
    margin-top: 0;
  }
  .description ul {
    padding-left: 20px;
  }
  .description li {
    margin-bottom: 8px;
  }
  .description span.gold { color: #d4af37; font-weight: 700; }
  .description span.brown { color: #6b4f3b; font-weight: 700; }
  .description span.red { color: #c94c4c; font-weight: 700; }


  /* Particle style */
  .particle {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    pointer-events: none;
    opacity: 1;
    animation: floatUp 800ms forwards;
  }
  @keyframes floatUp {
    0% {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
    100% {
      transform: translateY(-40px) scale(0.3);
      opacity: 0;
    }
  }
</style>
</head>
<body>
  <div class="container">
    <div class="game-area">
      <h1>Kawaii Whack-a-Mole</h1>
      <div class="scoreboard">Score: <span id="score">0</span></div>
      <div class="grid" id="grid"></div>
    </div>
    <div class="description">
      <h3>How to Play</h3>
      <ul>
        <li>Click the mole as it pops up!</li>
        <li><span class="gold">Gold mole:</span> +3 points</li>
        <li><span class="brown">Brown mole:</span> +1 point</li>
        <li><span class="red">Red mole:</span> -1 point</li>
      </ul>
      <p>Try to get the highest score possible!</p>
    </div>
  </div>


<script>
  const grid = document.getElementById("grid");
  const scoreDisplay = document.getElementById("score");
  let score = 0;
  let lastHole;


  const moleTypes = [
    { className: "gold", points: 3, colors: ['#f9e88f', '#d4af37'] },
    { className: "brown", points: 1, colors: ['#6b4f3b', '#a07c55'] },
    { className: "red", points: -1, colors: ['#c94c4c', '#e07b7b'] },
  ];


  function createMole() {
    const mole = document.createElement("div");
    mole.classList.add("mole");


    const chosenType = moleTypes[Math.floor(Math.random() * moleTypes.length)];
    mole.classList.add(chosenType.className);


    mole.innerHTML = `
      <svg viewBox="0 0 80 70" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <!-- Body + head combined -->
        <ellipse class="moleBody" cx="40" cy="40" rx="35" ry="30" />
        <!-- Rounded ears as part of body shape -->
        <ellipse class="moleBody" cx="15" cy="20" rx="12" ry="15" />
        <ellipse class="moleBody" cx="65" cy="20" rx="12" ry="15" />
        <!-- Cheeks -->
        <circle class="cheek" cx="22" cy="50" r="7" />
        <circle class="cheek" cx="58" cy="50" r="7" />
        <!-- Eyes with sparkle -->
        <circle class="eye" cx="27" cy="33" r="7" />
        <circle class="eye" cx="53" cy="33" r="7" />
        <circle cx="31" cy="28" r="3" fill="white" />
        <circle cx="57" cy="28" r="3" fill="white" />
        <!-- Nose -->
        <ellipse class="nose" cx="40" cy="43" rx="6" ry="4" />
        <!-- Smile -->
        <path d="M 30 50 Q 40 60 50 50" stroke="#7b5e3c" stroke-width="2" fill="none" />
      </svg>
    `;


    mole.addEventListener("click", (e) => {
      if (!mole.classList.contains("up")) return;


      score += chosenType.points;
      if (score < 0) score = 0;
      scoreDisplay.textContent = score;
      mole.classList.remove("up");


      spawnParticles(mole, chosenType.colors);
    });


    return mole;
  }


  function spawnParticles(mole, colors) {
    const hole = mole.parentElement;
    for (let i = 0; i < 8; i++) {
      const particle = document.createElement("div");
      particle.classList.add("particle");
      particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];


      // Random position around mole center
      const x = 40 + (Math.random() * 60 - 30);
      const y = 30 + (Math.random() * 40 - 20);
      particle.style.left = `${x}px`;
      particle.style.top = `${y}px`;


      hole.appendChild(particle);


      // Remove particle after animation ends
      particle.addEventListener('animationend', () => {
        particle.remove();
      });
    }
  }


  function randomTime(min, max) {
    return Math.round(Math.random() * (max - min) + min);
  }


  function randomHole(holes) {
    const idx = Math.floor(Math.random() * holes.length);
    const hole = holes[idx];
    if (hole === lastHole) return randomHole(holes);
    lastHole = hole;
    return hole;
  }


  function popUp() {
    const time = randomTime(900, 1400);
    const holes = document.querySelectorAll(".hole");
    const hole = randomHole(holes);


    const oldMole = hole.querySelector(".mole");
    if (oldMole) oldMole.remove();


    const mole = createMole();
    hole.appendChild(mole);
    // force reflow for transition to apply
    requestAnimationFrame(() => mole.classList.add("up"));


    setTimeout(() => {
      mole.classList.remove("up");
      setTimeout(() => {
        mole.remove();
        popUp();
      }, 400);
    }, time);
  }


  function setupHoles() {
    for(let i=0; i<9; i++) {
      const hole = document.createElement("div");
      hole.classList.add("hole");
      grid.appendChild(hole);
    }
  }


  setupHoles();
  popUp();
</script>
</body>
</html>